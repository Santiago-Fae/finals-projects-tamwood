<?php
	//SEO
	$seoTitle = Common::getSEOFormat('Home');
	$seoDescription = Common::getSEOFormat('');
?>
<!DOCTYPE html>
<html lang="<?php PCWMLang::echoLang(); ?>">
	<?php
		PCWMPage::writeHead(array(
			"title" => $seoTitle,
			"description" => $seoDescription,
			"extra-js" => '',
			"extra-css" => '',
			"og:title" => '',
		));
	?>

	<body>
		<?php
			echo LogicMicrodata::breadcrumbBuild([
				['name' => 'Home', 'url' => WEBSITE_URL]
			]);
			
			include(INCLUDES . 'header.php');
			include(INCLUDES . 'header-main-banner.php'); 
		?>

	<main class="wrapper">
		<!-- SOBRE A PSICOLOGA -->
		<section id="SectionSobre" class="bgLightNude py-12 sm:py-16 lg:py-20">
			<div class="sectionAnchor" id="Sobre"></div>
			<div class="px-3">
				<div class="containerExtended">
					<div class="flex flex-col-reverse justify-between items-center lg:flex-row lg:items-start xl:items-center">
						<?php
						$sobrePsicologa = LogicConteudos::getContentFromCategory("sobre")[0];
						$sobrePsicologaFilename = LogicConteudosImagens::getPrimaryImage($sobrePsicologa->id)->filename;

						if ($sobrePsicologaFilename) {
							$sobrePsicologaImg = LogicConteudosImagens::getImageUploadFolder(true) . $sobrePsicologaFilename;
						}
						else {
							$sobrePsicologaImg = './img/others/im-no-photo.jpg';
						}	
						?>
						<a href="<?php echo $sobrePsicologaImg ?>" class="imageRoundedCorners s-lightbox w-auto max-w-sm mt-8 sm:mt-12 md:max-w-none lg:w-1/3 lg:mt-0 xl:w-auto" data-aos="fade" data-aos-anchor-placement="center-bottom" data-aos-duration="1000">
							<img src="<?php echo Common::cacheGetImage($sobrePsicologaImg, 500, 658); ?>" alt="" class="w-full">
						</a>

						<div class="flex-1 max-w-5xl lg:pl-16 2xl:pl-24" data-aos="fade" data-aos-anchor-placement="center-bottom" data-aos-duration="1000" data-aos-offset="100">
							<h1 class="titleStyle1"><span><?php echo $sobrePsicologa->titulo_pt_br; ?></span></h1>
							<p class="mt-7"><?php echo $sobrePsicologa->resumo_pt_br; ?></p>
							<img src="./img/others/im-assinatura-daiane-1.svg" alt="" class="mt-8">
							<div class="boxTextContent mt-5 text-base">
								<?php echo $sobrePsicologa->corpo_pt_br; ?>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- SOBRE A PSICOLOGA END -->
		<!-- PSICÓLOGA CLÍNICA -->
		<section id="SectionClinica" class="bgLightGray py-12 sm:py-16 lg:py-20">
			<div class="sectionAnchor" id="Clinica"></div>
			<div class="px-3">
				<div class="containerExtended">
					<div class="flex flex-col justify-between items-center lg:items-start xl:items-center">
						<?php
						$sobrePsicologa = LogicConteudos::getContentFromCategory("psicologa-clinica")[0];
						$sobrePsicologaFilename = LogicConteudosImagens::getPrimaryImage($sobrePsicologa->id)->filename;

						if ($sobrePsicologaFilename) {
							$sobrePsicologaImg = LogicConteudosImagens::getImageUploadFolder(true) . $sobrePsicologaFilename;
						}
						else {
							$sobrePsicologaImg = './img/others/im-no-photo.jpg';
						}	
						?>
						<div class="flex-1 max-w-5xl lg:pl-14 2xl:pl-24" data-aos="fade" data-aos-anchor-placement="center-bottom" data-aos-duration="1000" data-aos-offset="100">
							<h1 class="titleStyle1"><span><?php echo $sobrePsicologa->titulo_pt_br; ?></span></h1>
							<p class="mt-7"><?php echo $sobrePsicologa->resumo_pt_br; ?></p>
							<img src="./img/others/im-assinatura-daiane-1.svg" alt="" class="mt-8">
							<div class="boxTextContent mt-5 text-base">
								<?php echo $sobrePsicologa->corpo_pt_br; ?>
							</div>
						</div>
						<a href="<?php echo $sobrePsicologaImg ?>" class="imageRoundedCorners s-lightbox w-auto max-w-sm mt-8 sm:mt-12 md:max-w-md xl:w-auto" data-aos="fade" data-aos-anchor-placement="center-bottom" data-aos-duration="1000">
							<img src="<?php echo Common::cacheGetImage($sobrePsicologaImg, false, false); ?>" alt="" class="w-full">
						</a>
					</div>
				</div>
			</div>
		</section>
		<!-- PSICÓLOGA CLÍNICA -->
		<!-- DEPOIMENTOS -->
		<section id="SectionDepoimentos" class="py-12 sm:py-16 lg:py-20">
			<div class="px-3 text-center">
				<h1 class="titleStyle1">Depoimentos</h1>
				<p class="mt-4 mb-6 sm:mt-6 sm:mb-10">O que meus pacientes dizem:</p>

				<div class="boxDepoimentos">
					<div class="listaDepoimentos">
						<?php
						$empresaDepoimentos = LogicConteudos::getContentFromCategory("depoimentos");
						if ($empresaDepoimentos) {
							foreach ($empresaDepoimentos as $depoimento) {
								?>
								<div class="itemLista">
									<div class="contentItem flex flex-wrap justify-center items-center">
										<p class="w-full text-base leading-normal"><?php echo $depoimento->resumo_pt_br; ?></p>
										<h3 class="w-full mt-6 text-base font-black"><?php echo $depoimento->titulo_pt_br; ?></h3>
									</div>
								</div>
								<?php
							}
						}
						?>
					</div>
				</div>
			</div>
		</section>
		<!-- DEPOIMENTOS END -->
		<!-- GALERIA -->
		<section id="SectionGaleria" class="bgLightGray py-12 sm:py-16 lg:py-20">
			<div class="containerExtended px-3 text-center">
				<div class="">
					<div>
						<?php
						$galeria = LogicConteudos::getContentFromCategory("galeria")[0];
						$listaImagens = LogicConteudosImagens::filter(['conteudo' => $galeria->id]);

						if ($listaImagens) {
							?>
								<!-- LISTA IMAGENS -->
								<h1 class="titleStyle1 mediumGrey medium mt-16 mb-6">Galeria de imagens</h1>
								<div class="galeriaDeImagens">
									<?php
										foreach ($listaImagens as $imagem) {
											$img = LogicConteudosImagens::getImageUploadFolder(true) . $imagem->filename;
											?>
												<a href="<?php echo $img; ?>" class="s-lightbox" data-s-lightbox-group="galeriaImagens" aria-label="Ampliar imagem">
													<img 
														src="<?php echo PCWMImage::cacheImage($img, 400, false, ['quality' => 80, 'crop' => true]) ?>"
														alt="<?php echo $imagem->legenda; ?>"
														>
												</a>	
											<?php
										}
									?>
								</div>
								<!-- LISTA IMAGENS END -->
							<?php
						}
						?>
					</div>
				</div>
			</div>
		</section>
		<!-- GALERIA END -->
		<!-- BLOG -->
		<section id="OutrosArtigos" class="py-12 sm:py-16 lg:py-20">
			<div class="containerExtended mx-auto flex flex-col items-center">
				<div class="flex flex-col items-center">
					<h1 class="titleStyle1">Artigos</h1>
					<div class="paragrafosBanners mt-6">
						<p>Artigos e novidades a respeito do meu trabalho.</p>
					</div>
					<div class="flex align-left mt-10">
						<a href="./blog" class="buttonBanner">Leia todos os artigos</a>
					</div>
				</div>
				<div class="artigosGeraisLista flex md:mt-16 lg:mt-0">
					<?php 
					$listaBlog = LogicBlog::filter(['is_ativo' => 1, 'ipp' => 3]);
					if ($listaBlog) { 
						foreach ($listaBlog as $item) {
							$img = LogicBlogImagens::getImageUploadFolder(true) . LogicBlogImagens::getPrimaryImage($item->id)->filename;
							$dataPublicacaoAleatorios = Common::sql2date($item->data_publicacao, "-", $horas = false);
							$dateAletorios = new DateTime($dataPublicacaoAleatorios);

							if (!LogicBlogImagens::getPrimaryImage($item->id)->filename) {
								$img = PCWMImage::cacheImage('./img/im-no-photo.jpg', 388, false);
							}
							?>
							<a href="./blog-aberto/<?php echo $item->slug ?>" class="artigosBox flex flex-col mr-6">
								<img class="" src="<?php echo PCWMImage::cacheImage($img, 388, false); ?>">
								<div class="artigoDescricao">
									<h3 class="titleStyle3"><?php echo $item->titulo_pt_br; ?></h3>
									<div class="paragrafosGerais mt-5">
										<p class="data text-base leading-7"><?php echo strftime('%e de %B de %Y', $dateAletorios->format("U")); ?></p>
									</div>
									<div class="artigoBarra"></div>
									<div class="paragrafosGerais mt-5">
										<?php 
										if (strlen($item->resumo_pt_br) > 150) {
											$resumo = substr($item->resumo_pt_br, 0, 150) . '...';
										}
										else {
											$resumo = $item->resumo_pt_br;
										} 
										?>
										<p class="text-base leading-7"><?php echo $resumo; ?></p>
									</div>
								</div>
							</a>
							<?php
						}
					}
					?>
				</div>
			</div>
		</section>
		<!-- BLOG END -->
	</main>

    <?php Common::includeFile('footer.php'); ?>
	</body>
</html>