<?php
	$listaBanners = LogicConteudos::getContentFromCategory('banners', 'conteudos.indice ASC');
	if ($listaBanners) {
		?>
			<nav class="boxMainBanner">
				<ul class="clearfix">
					<?php
						foreach ($listaBanners as $item) {
							if (!$bannerFilename = LogicConteudosImagens::getPrimaryImage($item->id)->filename) {
								$video = LogicConteudosArquivos::filter(['conteudo'=>$item->id, 'ipp'=>1])[0];
								$player = LogicConteudosArquivos::getFileUploadFolder(true) . $video->filename;
							}
							$imageFile = LogicConteudosImagens::getPrimaryImage($item->id)->filename;
							$imgFile = LogicConteudosImagens::getImageUploadFolder(true) . $imageFile;
							$link =  strlen($item->url) > 10 ? $item->url : 'javascript:void(0);';
							$title = htmlspecialchars(stripslashes($item->titulo_pt_br));

							TimeTracker::track('Main Banner - Image Init');
							
							if ($bannerFilename) {
								?>
									<li>
										<a href="<?php echo $link; ?>" target="<?php echo $item->target; ?>" title="<?php echo $title; ?>">
											<img 
												src="<?php echo Common::cacheGetImage($imgFile, 1920, 570); ?>" 
												width="1920"
												height="570"
												alt="<?php echo $title; ?>"
											>
											<div class="container mx-auto px-3">
												<div class="infoBanner">
													<?php
													if ($title || $item->resumo) {
														?>
														<h1 class="titleStyle1 larger white"><?php echo $title; ?></h1>
														<?php
													}
													?>
													<p class="mt-5 sm:mt-8"><?php echo $item->resumo_pt_br; ?></p>
													<?php 
													if ($item->url) {
														?>
														<span href="" class="button shadow orange larger mt-5 sm:mt-8">Saiba mais</span>
														<?php
													}
													?>
												</div>
											</div>	
										</a>
									</li>
								<?php
							}
							else {
								?>
								 <li>
									<a href="<?php echo $link; ?>" target="<?php echo $item->target; ?>" title="<?php echo $title; ?>">
										<video muted="true" autoplay="autoplay" src="<?php echo $player; ?>" preload="auto" autostart loop="loop" playsinline width="1920" height="710"></video>
									</a>
								</li> 
								<?php
							}
							TimeTracker::track('Main Banner - Image End');
						}
					?>
				</ul>
				<div class="containerExtended mx-auto px-3">
					<button type="button" class="btNavigation prev"></button>
					<button type="button" class="btNavigation next"></button>
				</div>
			</nav>
		<?php
	}
?>

