# Se este arquivo não aparecer na listagem do FTP do servidor,
# o servidor oculta ele. Se precisar "apagar" o arquivo, apenas
# comente ou apague as informações abaixo e envie novamente.

Options -Indexes
AddDefaultCharset UTF-8


#Security //Secure
Header always edit Set-Cookie (.*) "$1; SameSite=Lax;"


#SVG BUG CORRECTION
AddType image/svg+xml svg svgz
AddEncoding gzip svgz



#CACHE STUFF
FileETag None

<IfModule mod_headers.c>
	# 1 YEAR
  <FilesMatch "\.(css|js|jpg|jpeg|png|gif|svg|svg+xml|ico|flv)$">
  	Header set Cache-Control "max-age=31536000, public"
  </FilesMatch>
	
	# 15 DAYS
  <FilesMatch "\.(pdf)$">
  	Header set Cache-Control "max-age=1296000, public"
  </FilesMatch>

  # 7 DAYS
  <FilesMatch "\.(xml|txt)$">
  	Header set Cache-Control "max-age=604800, proxy-revalidate"
  </FilesMatch>

  # 4 HOURS
  <FilesMatch "\.(html|htm)$">
  	Header set Cache-Control "max-age=14400, private, proxy-revalidate"
  </FilesMatch>
	
	# NEVER
	<FilesMatch "\.(php)$">
  	Header set Cache-Control "no-cache, no-store, must-revalidate"
  </FilesMatch>
</IfModule>



# GZIP | COMPRESSION
<ifModule mod_gzip.c>
	mod_gzip_on Yes
	mod_gzip_dechunk Yes
	mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
	mod_gzip_item_include handler ^cgi-script$
	mod_gzip_item_include mime ^text/.*
	mod_gzip_item_include mime ^application/x-javascript.*
	mod_gzip_item_include mime ^application/json.*
	mod_gzip_item_exclude mime ^image/.*
	mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

<IfModule mod_deflate.c>
	AddOutputFilterByType DEFLATE text/plain
	AddOutputFilterByType DEFLATE text/html
	AddOutputFilterByType DEFLATE text/xml
	AddOutputFilterByType DEFLATE text/css
	AddOutputFilterByType DEFLATE application/xml
	AddOutputFilterByType DEFLATE application/xhtml+xml
	AddOutputFilterByType DEFLATE application/rss+xml
	AddOutputFilterByType DEFLATE application/javascript
	AddOutputFilterByType DEFLATE application/x-javascript
	AddOutputFilterByType DEFLATE application/json

	<IfModule mod_setenvif.c>
		BrowserMatch ^Mozilla/4 gzip-only-text/html
		BrowserMatch ^Mozilla/4\.0[678] no-gzip
		BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
	</IfModule>

	<IfModule mod_headers.c>
		Header append Vary User-Agent env=!dont-vary
	</IfModule>
</IfModule>

<files *.html>
	SetOutputFilter DEFLATE
</files>



# REWRITE
RewriteEngine On


# OLD DOMAIN TO NEW
#RewriteCond %{HTTP_HOST} ^itagrelhas.com.br [NC,OR]
#RewriteCond %{HTTP_HOST} ^www.itagrelhas.com.br [NC]
#RewriteRule ^(.*)$ https://www.itanova.com.br [R=302,L,NC]


# FORCE WWW
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]


# FORCE HTTPS
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} !^/lib/cronjobs
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]


# APENAS PARA SITES HOSPEDADOS DENTRO DE OUTRA PASTA
#RewriteCond %{HTTP_HOST} ^(www.)?ilex.com.br$
#RewriteCond %{REQUEST_URI} !^/site/
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule ^(.*)$ site/$1

#RewriteCond %{HTTP_HOST} ^(www.)?ilex.com.br$
#RewriteRule ^(/)?$ site/index.php [L]
###################################################



# Directs all traffic to index.php
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]

# PHP STUFF
#php_value upload_max_filesize 300M
#php_value post_max_size 300M
#php_value max_execution_time 7200
#php_value max_input_time 7200
#php_value memory_limit 1024M